language: php

php:
- '7.2'

install:
- yes '' | pecl install swoole
- composer install

script:
- php vendor/bin/phpunit tests --repeat 100

after_success:
- composer require --dev php-coveralls/php-coveralls
- php vendor/bin/phpunit tests --whitelist src --coverage-clover coverage.xml
- php vendor/bin/php-coveralls -x coverage.xml -o coveralls.json
